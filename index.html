<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/tutorial.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css"
    />
    <title>Space invaders|Instructions</title>
  </head>
  <body>
    <header>
      <div class="header__container">
        <h1>
          <a class="header__title" href="/index.html">Space Invaders</a>
        </h1>

        <a
          class="link-game"
          target="_blank"
          href="https://pgmgent-atwork2.github.io/project-1-workshop-start-2-code-pong/game.html"
          >Link naar spel</a
        >
      </div>
    </header>

    <main>
      <div class="main-content">
        <p>
          We gaan een simpele game maken genaamd "Space Invaders". Het doel van
          het spel is om met de pijltjes op je toetsenbord je ruimteschip van
          links naar rechts te bewegen en doormiddel van de spatiebalk kogels af
          te schieten naar de aliens om deze te verslaan.
        </p>

        <img
          class="main-image"
          src="/img/code-snippets/screenshot-game.png"
          alt=""
        />

        <p>Hier hebben we 3 codeertalen voor nodig, namelijk</p>

        <ul>
          <li class="list__item">CSS</li>
          <li class="list__item">HTML</li>
          <li class="list__item">Javascript</li>
        </ul>

        <h2>STAP 1 - Mappenstructuur</h2>

        <p>
          We hebben een code-editor nodig. In de workshop gebruiken we
          <a class="link" target="_blank" href="https://code.visualstudio.com/"
            >Visual studio code</a
          >.
        </p>

        <h3>1.1 Download bronbestand</h3>
        <button class="download">
          <a class="link" href="https://pgmgent-atwork2.github.io/project-1-workshop-start-2-code-pong/bronbestand.zip">Download</a>
        </button>

        <img src="img/code-snippets/download-bron.png" alt="" />

        <p>Unzip het bestand en plaats dit bestand dan op je bureaublad.</p>

        <h3>1.2 bestand openen in VS code</h3>

        <p>
          <strong>Sleep</strong> het bestand van op je bureaublad naar het VS
          code logo dat ook op je bureaublad staat.
        </p>
        <img src="img/code-snippets/bronbestand-slepen.png" alt="" />

        <p>Je zou nu deze mappenstructuur in vs code moeten zien.</p>

        <img src="img/code-snippets/mappenstructuur.png" alt="" />

        <p>
          Alle bestanden zouden leeg moeten zijn behalve de
          <strong>reset.css</strong> file en in de map
          <strong>img</strong> zouden 2 afbeeldingen moeten zitten, namelijk
          <strong>alien.png</strong> en <strong>ship.png</strong>.
        </p>

        <h3>1.3 Installeer "live-server" extensie</h3>

        <p>
          Ga naar extensies (links op vs code) en zoek naar de extensie
          <strong>live-server</strong>.
        </p>

        <img src="img/code-snippets/live-server.png" alt="" />

        <p>
          Klik nu rechts onderaan op <strong>Go Live</strong>. Een blanco pagina
          zou nu moeten openen.
        </p>

        <img src="img/code-snippets/live-server-click.png" alt="" />

        <h2>STAP 2 - HTML & CSS</h2>
        <h3>2.1 HTML</h3>
        <p>
          Ga naar je <strong>index.html</strong> file en plak onderstaande code
          hierin en <strong>bewaar</strong> dit bestand.
        </p>

        <pre>
            <code>
                &lt;!DOCTYPE html&gt;
                &lt;html lang=&quot;en&quot;&gt;
                  &lt;head&gt;
                    &lt;meta charset=&quot;UTF-8&quot; /&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
                    &lt;title&gt;Space invaders&lt;/title&gt;
                    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/reset.css&quot; /&gt;
                    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/main.css&quot; /&gt;
                  &lt;/head&gt;
                  &lt;body&gt;
                    &lt;header&gt;&lt;/header&gt;
                    &lt;main&gt;
                      &lt;h1&gt;Space Invaders&lt;/h1&gt;
                      &lt;canvas id=&quot;board&quot;&gt;
                       
                      &lt;/canvas&gt;
                      
                    &lt;/main&gt;
                    &lt;footer&gt;&lt;/footer&gt;
                
                    &lt;script src=&quot;/js/main.js&quot;&gt;&lt;/script&gt;
                  &lt;/body&gt;
                &lt;/html&gt;
            </code>
        </pre>

        <p>
          Je zou nu dit moeten zien op de pagina die je hebt geopend via
          <strong>live server</strong>
        </p>

        <img src="img/code-snippets/add-html.png" alt="" />

        <h3>2.2 CSS</h3>

        <p>
          We gaan nu onze <strong>css</strong> toevoegen. Dit zal ervoor zorgen
          dat ons <strong>speelbord</strong> zichtbaar wordt en onze titel in
          het midden staat.
        </p>
        <p>
          Ga in vs code naar je <strong>css folder</strong> en open
          <strong>main.css</strong> en plak onderstaande code hierin en
          <strong>bewaar dit bestand</strong>.
        </p>

        <pre>
            <code>
                body {
                    text-align: center;
                    font-family: &quot;Roboto&quot;, sans-serif;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  }
                  
                  #board {
                    background-color: black;
                  }
                  
            </code>
        </pre>

        <p>Je zou nu dit moeten zien in je browser.</p>
        <img src="img/code-snippets/add-css.png" alt="" />

        <p>
          Als je wil kan je nu de <strong>kleur</strong> van je bord veranderen.
          Doe dit door de <strong>background-color</strong> te veranderen van
          het <strong>#board</strong>
        </p>

        <p>
          Bijvoorbeeld, we veranderen de kleur van het bord naar
          <strong>rood</strong>.
        </p>

        <img src="img/code-snippets/red-back.png" alt="" />
        <img src="img/code-snippets/red-back-2.png" alt="" />

        <h2>STAP-3 Javascript</h2>

        <h3>3.1 Tekenen van het speelbord</h3>

        <p>
          Vanaf nu werken we alleen nog maar in de
          <strong>main.js</strong> file.
        </p>

        <p>
          We gaan beginnen met het bepalen van de <strong>grootte</strong> van
          ons <strong>speelbord.</strong>
        </p>

        <pre>
            <code>
// de grootte van een tegel en het aantal rijen en kolommen op het speelbord
// tegelgrootte is in dit geval 32px
let tileSize = 32;
let rows = 16;
let columns = 16;

// variabelen voor het speelbord en de grootte ervan
let board;
let boardWidth = tileSize * columns;
let boardHeight = tileSize * rows;
let context;

            </code>
        </pre>

        <p>
          In dit geval is ons speelbord verdeeld in
          <strong>16 rijen en 16 kolommen</strong>. 1 vakje is 32 pixels groot.
          dus 1 kolom en 1 rij zijn <strong>16 x 32 = 512 pixels</strong> groot
        </p>

        <p>
          In het volgende stuk gaan we gebruik maken van een
          <strong>functie</strong> (Uitleg hiervan wordt in de workshop
          gegeven).
        </p>
        <p>
          <strong>Onder onze variabelen</strong> plaatsen we deze functie en
          roepen we hem ook direct op.
        </p>

        <pre>
            <code>
                function start() {
                    // Vind het speelbord en stel de grootte ervan in
                    board = document.getElementById("board");
                    board.width = boardWidth;
                    board.height = boardHeight;
                    context = board.getContext("2d");
                  }
                  
                  start();
                  
            </code>
        </pre>

        <p>
          Deze functie zal ervoor zorgen dat het
          <strong>speelbord getekend</strong> wordt.
        </p>

        <p>Je gaat nu in de <strong>browser</strong> dit op je scherm zien.</p>
        <img src="img/code-snippets/empty-board.png" alt="" />

        <p>Proficiat! Het speelbord is getekend! Op naar de volgende stap!</p>

        <h3>3.2 Tekenen van het schip</h3>

        <p>
          <strong>Onder de variabelen</strong> van het speelbord,
          <strong>bepalen we de variabelen</strong> van ons ruimteschip.
        </p>

        <pre>
            <code>
// variabelen voor het ruimteschip
let shipWidth = tileSize * 2;
let shipHeight = tileSize;
let shipX = (tileSize * columns) / 2 - tileSize;
let shipY = tileSize * rows - tileSize * 2;

// het ruimteschip object met positie en grootte
let ship = {
  x: shipX,
  y: shipY,
  width: shipWidth,
  height: shipHeight,
};

// Definieer variabelen voor het ruimteschipafbeelding en de snelheid van het ruimteschip
let shipImg;
// schip zal 1 "tilesize" verschuiven bij het drukken van een pijltjestoets
let shipVelocityX = tileSize;
            </code>
        </pre>

        <p>
          Nu dat de variabelen van ons schip er in staan, moeten we net zoals
          ons speelbord het <strong>schip tekenen</strong>
        </p>

        <p>
          We voegen onder onze al bestaande code in de start functie deze code
          toe. onze start functie ziet er nu zo uit.
        </p>

        <pre>
            <code>
                function start() {
                    // Vind het speelbord en stel de grootte ervan in
                    board = document.getElementById("board");
                    board.width = boardWidth;
                    board.height = boardHeight;
                    context = board.getContext("2d");
                  
                    // Laad afbeeldingen van het ruimteschip en aliens
                    shipImg = new Image();
                    shipImg.src = "/img/ship.png";
                    shipImg.onload = function () {
                      // Tekenen van het ruimteschip
                      context.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
                    };
                  }
            </code>
        </pre>

        <p>Je ziet nu dit in de browser.</p>
        <img src="img/code-snippets/board-with-ship.png" alt="" />

        <h3>3.3 Bewegen van het schip</h3>

        <p>
          Om het schip te laten <strong>bewegen</strong> schrijven we een
          <strong>nieuwe functie</strong> genaamd <strong>moveShip</strong>
        </p>
        .
        <pre>
          <code>
            function moveShip(e) {
              if (e.code == "ArrowLeft" && ship.x - shipVelocityX >= 0) {
                ship.x -= shipVelocityX;
              } else if (
                e.code == "ArrowRight" &&
                ship.x + shipVelocityX + ship.width <= board.width
              ) {
                ship.x += shipVelocityX;
              }
            }
          </code>
        </pre>

        <p>
          de <strong>e tussen haakjes</strong> is een afkorting voor event. Dus
          als de <strong>event code</strong> gelijk is aan
          <strong>ArrowLeft</strong> dan zal het schip naar links bewegen en
          voor rechts gebruiken we dezelfde logica.
        </p>

        <p>
          Als je het schip beweegt moet de browser updaten. Hiervoor schrijven
          we een nieuwe functie genaamd <strong>update</strong>. Deze mag onder
          de moveShip functie.
        </p>

        <pre>
          <code>
            function update() {
              // Vraag de browser om een nieuwe frame te tekenen
              requestAnimationFrame(update);
            
              // Wis het vorige frame van het speelbord
              context.clearRect(0, 0, board.width, board.height);
            
              // Tekenen van het ruimteschip
              context.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
            }
          </code>
        </pre>

        <p>
          In onze <strong>start</strong> functie plaatsen we nog
          <strong>extra</strong> code helemaal onderaan de functie.
        </p>

        <pre>
          <code>
            function start() {
              // Vind het speelbord en stel de grootte ervan in
              board = document.getElementById("board");
              board.width = boardWidth;
              board.height = boardHeight;
              context = board.getContext("2d");
            
              // Laad afbeeldingen van het ruimteschip en aliens
              shipImg = new Image();
              shipImg.src = "/img/ship.png";
              shipImg.onload = function () {
                // Tekenen van het ruimteschip
                context.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
              };
            
              // Start de game loop
              requestAnimationFrame(update);
            
              // Luister naar toetsaanslagen voor beweging van het ruimteschip en schieten
              document.addEventListener("keydown", moveShip);
            }
          </code>
        </pre>
        <p>
          We zien dat we hierbij een <strong>eventlistener</strong> toevoegen.
          Dit zorgt ervoor dat we gaan luisteren naar een
          <strong>keydown</strong> en wanneer deze de
          <strong>linkse of rechtse pijltjestoets</strong> is dan zal de browser
          hiernaar luisteren en het schip bewegen.
        </p>

        <p><strong>EXTRA</strong></p>

        <p>
          Probeer eens deze lijn code te verwijderen in de
          <strong>update functie</strong>. Wat gebeurt er dan?
        </p>

        <pre>
          <code>
            context.clearRect(0, 0, board.width, board.height);
          </code>
        </pre>

        <h3>3.4 Toevoegen van aliens</h3>

        <p>
          We beginnen met het toevoegen van onze variabelen van onze aliens. Je
          mag deze toevoegen onder die van het schip.
        </p>

        <pre>
          <code>
// Definieer variabelen voor de aliens
let alienArray = [];
let alienWidth = tileSize * 2;
let alienHeight = tileSize * 1;

// Startcoördinaten voor aliens
let alienX = tileSize;
let alienY = tileSize;

// Variabelen voor afbeeldingen en kenmerken van aliens
let alienImg;
let alienRows = 2;
let alienColumns = 3;
let alienCount = 0;

// Snelheid van de aliens
let alienVelocityX = 1;
          </code>
        </pre>

        <p>
          Nu onze variabelen gekend zijn maken we nu terug een
          <strong>functie</strong> genaamd <strong>createAliens</strong> die
          onze aliens zal maken. Deze mag helemaal onderaan toegevoegd worden.
        </p>

        <pre>
          <code>
            function createAliens() {
              for (let c = 0; c < alienColumns; c++) {
                for (let r = 0; r < alienRows; r++) {
                  let alien = {
                    img: alienImg,
                    x: alienX + c * alienWidth,
                    y: alienY + r * alienHeight,
                    width: alienWidth,
                    height: alienHeight,
                    alive: true,
                  };
                  alienArray.push(alien);
                }
              }
              alienCount = alienArray.length;
            }
          </code>
        </pre>

        <p>
          Nu gaan we terug onze <strong>start functie</strong> aanpassen. We
          voegen onze <strong>createAliens functie</strong> en onze img voor de
          aliens toe.
        </p>

        <pre>
          <code>
            function start() {
              // Vind het speelbord en stel de grootte ervan in
              board = document.getElementById("board");
              board.width = boardWidth;
              board.height = boardHeight;
              context = board.getContext("2d");
            
              // Laad afbeeldingen van het ruimteschip en aliens
              shipImg = new Image();
              shipImg.src = "/img/ship.png";
              shipImg.onload = function () {
                // Tekenen van het ruimteschip
                context.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
              };
              alienImg = new Image();
              alienImg.src = "/img/alien.png";
            
              // Creëer een groep aliens
              createAliens();
              // Start de game loop
              requestAnimationFrame(update);
            
              // Luister naar toetsaanslagen voor beweging van het ruimteschip en schieten
              document.addEventListener("keydown", moveShip);
            }
          </code>
        </pre>

        <p>
          Nu updaten we onze <strong>update functie</strong>. We voegen dit stuk
          code toe helemaal onderin de functie. Dit staat dus
          <strong>IN</strong> de functie.
        </p>

        <pre>
          <code>
            for (let i = 0; i < alienArray.length; i++) {
              let alien = alienArray[i];
              if (alien.alive) {
                // Bewegen van aliens en detecteren van aanraken rand van bord
                alien.x += alienVelocityX;
                if (alien.x + alien.width >= board.width || alien.x <= 0) {
                  alienVelocityX *= -1;
                  alien.x += alienVelocityX * 2;
                  // Verplaats de aliens naar beneden als ze de zijkant raken
                  for (let j = 0; j < alienArray.length; j++) {
                    alienArray[j].y += alienHeight;
                  }
                }
                // Tekenen van de alien
                context.drawImage(alienImg, alien.x, alien.y, alien.width, alien.height);
                // Controleer of aliens het ruimteschip raken
                
              }
            }
          </code>
        </pre>

        <p>Ga nu terug naar de browser en nu zie je normaal dit scherm.</p>

        <img src="img/code-snippets/add-aliens.png" alt="" />

        <p>
          Je ziet nu de aliens van links naar rechts bewegen en elke keer ze de
          rand raken schuiven ze 1 rij naar beneden.
        </p>

        <h3>3.5 kogels pew pew</h3>

        <p>Nu is het tijd om de <strong>kogels</strong> toe te voegen.</p>

        <p>
          Voeg onder de <strong>alien variabelen</strong> de variabelen voor de
          kogels toe.
        </p>

        <pre>
          <code>
// Variabelen voor kogels
let bulletArray = [];
let bulletVelocityY = -10;
          </code>
        </pre>

        <p>
          De volgende stap is onze <strong>shoot functie</strong> en
          <strong>detectCollision functie</strong> toe te voegen.
        </p>

        <p>Doe dit helemaal onderaan.</p>

        <pre>
          <code>
            function shoot(e) {
              
              if (e.code == "Space") {
                let bullet = {
                  x: ship.x + (shipWidth * 15) / 32,
                  y: ship.y,
                  width: tileSize / 8,
                  height: tileSize / 2,
                  used: false,
                };
                bulletArray.push(bullet);
              }
            }
            
            // Functie voor het detecteren van botsingen tussen objecten
            function detectCollision(a, b) {
              return (
                a.x < b.x + b.width &&
                a.x + a.width > b.x &&
                a.y < b.y + b.height &&
                a.y + a.height > b.y
              );
            }
          </code>
        </pre>

        <p>
          Voeg nu in de start functie helemaal onderaan onder de
          <strong>eventlistener</strong> deze code toe.
        </p>

        <pre>
          <code>
            // Luister naar toetsaanslagen voor beweging van het ruimteschip en schieten
            document.addEventListener("keydown", moveShip);
            // key up om ervoor te zorgen dat je de spatiebalk niet ingedrukt kan houden
            document.addEventListener("keyup", shoot);
          </code>
        </pre>

        <p>
          helemaal onderaan de <strong>update functie</strong> zetten we deze
          code
        </p>

        <pre>
          <code>
  // Tekenen van de kogels en detecteren van botsingen met aliens
  for (let i = 0; i < bulletArray.length; i++) {
    let bullet = bulletArray[i];
    bullet.y += bulletVelocityY;
    context.fillStyle = "white";
    context.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
    for (let j = 0; j < alienArray.length; j++) {
      let alien = alienArray[j];
      if (!bullet.used && alien.alive && detectCollision(bullet, alien)) {
        bullet.used = true;
        alien.alive = false;
        alienCount--;
        score += 100;
      }
    }
  }

  // Opruimen van gebruikte kogels
  while (
    bulletArray.length > 0 &&
    (bulletArray[0].used || bulletArray[0].y < 0)
  ) {
    bulletArray.shift();
  }
          </code>
        </pre>

        <p>
          Normaal zou je nu kogels kunnen schieten EN zouden de aliens moeten
          verslagen worden wanneer ze geraakt worden.
        </p>

        <h3>3.6 Alle aliens zijn dood... Wat nu?</h3>

        <p>
          Hoera! Alle aliens zijn dood... maar je wilt natuurlijk wel verder
          spelen.
        </p>

        <p>
          Voeg deze code toe aan op het einde van je
          <strong>update functie</strong>
        </p>

        <pre>
          <code>
  // Start een nieuw level als alle aliens zijn verslagen
  if (alienCount == 0) {
    alienColumns = Math.min(alienColumns + 1, columns / 2 - 2);
    alienRows = Math.min(alienRows + 1, rows - 4);
    alienVelocityX += 0.2;
    alienArray = [];
    bulletArray = [];
    createAliens();
  }
          </code>
        </pre>

        <p>
          Dit zal ervoor zorgen dat er een nieuw <strong>EN</strong> moeilijker
          level zal starten wanneer alle aliens dood zijn.
        </p>

        <h3>3.7 Game Over :(</h3>

        <p>
          De aliens zijn na een tijd te sterk geworden en hebben je schip
          bereikt.
        </p>
        <p>Normaal zou het dan nu <strong>Game Over</strong> moeten zijn.</p>

        <p>Voeg deze variabele toe onder alle andere variabalen</p>

        <pre>
          <code>
            let gameOver = false;
          </code>
        </pre>
        <p>
          Voeg onder de <strong>requestAnimationFrame(update)</strong> in de
          <strong>update functie</strong> dit stuk code toe.
        </p>

        <pre>
          <code>
  // Vraag de browser om een nieuwe frame te tekenen
  requestAnimationFrame(update);

  // Stop de update als het spel voorbij is
  if (gameOver) {
    return;
  }
          </code>
        </pre>

        <p>
          Pas nu de for loop aan in de update functie voor het tekenen van de
          aliens naar dit.
        </p>

        <pre>
          <code>
            // Tekenen van de aliens
            for (let i = 0; i < alienArray.length; i++) {
              let alien = alienArray[i];
              if (alien.alive) {
                // Bewegen van aliens en detecteren van aanraken rand van bord
                alien.x += alienVelocityX;
                if (alien.x + alien.width >= board.width || alien.x <= 0) {
                  alienVelocityX *= -1;
                  alien.x += alienVelocityX * 2;
                  // Verplaats de aliens naar beneden als ze de zijkant raken
                  for (let j = 0; j < alienArray.length; j++) {
                    alienArray[j].y += alienHeight;
                  }
                }
                // Tekenen van de alien
                context.drawImage(alienImg, alien.x, alien.y, alien.width, alien.height);
                // Controleer of aliens het ruimteschip raken
                if (alien.y >= ship.y) {
                  gameOver = true;
                }
              }
            }
      
          </code>
        </pre>

        <p>
          Nu gaan we onze <strong>moveShip functie</strong> bewerken naar dit.
        </p>

        <pre>
          <code>
            function moveShip(e) {
              if (gameOver) {
                return;
              }
              if (e.code == "ArrowLeft" && ship.x - shipVelocityX >= 0) {
                ship.x -= shipVelocityX;
              } else if (
                e.code == "ArrowRight" &&
                ship.x + shipVelocityX + ship.width <= board.width
              ) {
                ship.x += shipVelocityX;
              }
            }
          </code>
        </pre>

        <p>En de <strong>shoot functie</strong> naar dit</p>

        <pre>
          <code>
            function shoot(e) {
              if (gameOver) {
                return;
              }
              if (e.code == "Space") {
                let bullet = {
                  x: ship.x + (shipWidth * 15) / 32,
                  y: ship.y,
                  width: tileSize / 8,
                  height: tileSize / 2,
                  used: false,
                };
                bulletArray.push(bullet);
              }
            }
          </code>
        </pre>

        <h3>3.8 Score</h3>

        <p>
          Natuurlijk zou je ook graag een score willen bijhouden voor als je je
          record wilt verbreken of tegen je vrienden speelt.
        </p>

        <p>
          Voeg eerst een variabele <strong>score</strong> toe om daarin je score
          in op te slaan.
        </p>

        <p>Voeg dit toe onderaan al je andere variabalen</p>

        <pre>
          <code>
            let score = 0;
          </code>
        </pre>
        <p>
          En als laatste voegen we deze code toe aan het einde van de
          <strong>update functie</strong>
        </p>

        <pre>
          <code>
            context.fillStyle = "white";
            context.font = "16px courier";
            context.fillText(score, 5, 20);
          </code>
        </pre>

        <p>HOERAAAAA!!! het spel is af!</p>
      </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
